{% extends 'base.html.twig' %}

{% block title %}Récapitulatif inscription{% endblock %}

{% block body %}
    <div class="recap-container">
        <h1 class="text-center mb-4">Récapitulatif de l'inscription</h1>

        {# Section Responsable Principal #}
        <div class="recap-section">
            <div class="section-header">
                <h2>Informations responsable principal</h2>
                <a href="{{ path('app_inscription_edit_user', {'id': user.id}) }}" class="btn btn-primary">
                    <i class="fas fa-edit"></i> Modifier
                </a>
            </div>
            <div class="section-content">
                <p><strong>Nom :</strong> {{ user.name }}</p>
                <p><strong>Prénom :</strong> {{ user.firstName }}</p>
                <p><strong>Email :</strong> {{ user.email }}</p>
                <p><strong>Téléphone :</strong> {{ user.phone }}</p>
                <p><strong>Lien avec l'enfant :</strong> {{ userChild.relation }}</p>
            </div>
        </div>

        {# Section Accompagnateur #}
        {% if recovery %}
            <div class="recap-section">
                <div class="section-header">
                    <h2>Informations accompagnateur</h2>
                    <a href="{{ path('app_inscription_edit_recovery', {'id': recovery.id}) }}" class="btn btn-primary">
                        <i class="fas fa-edit"></i> Modifier
                    </a>
                </div>
                <div class="section-content">
                    <p><strong>Nom :</strong> {{ recovery.name }}</p>
                    <p><strong>Prénom :</strong> {{ recovery.firstName }}</p>
                    <p><strong>Email :</strong> {{ recovery.email }}</p>
                    <p><strong>Téléphone :</strong> {{ recovery.phone }}</p>
                    <p><strong>Lien avec l'enfant :</strong> {{ recoveryChild.relation }}</p>
                    <p><strong>Responsable légal :</strong> {{ recoveryChild.isResponsable ? 'Oui' : 'Non' }}</p>
                </div>
            </div>
        {% endif %}

        {# Section Enfant #}
        <div class="recap-section">
            <div class="section-header">
                <h2>Informations enfant</h2>
                <a href="{{ path('app_inscription_edit_child', {'id': child.id}) }}" class="btn btn-primary">
                    <i class="fas fa-edit"></i> Modifier
                </a>
            </div>
            <div class="section-content">
                <p><strong>Nom :</strong> {{ child.name }}</p>
                <p><strong>Prénom :</strong> {{ child.firstName }}</p>
                <p><strong>Date de naissance :</strong> {{ child.birthDate|date('d/m/Y') }}</p>
                <p><strong>Genre :</strong> {{ child.genre }}</p>
                <p><strong>Allergies :</strong> {{ child.allergy ?? 'Aucune' }}</p>
                <p><strong>Spécificités médicales :</strong> {{ child.medicalSpecificity ?? 'Aucune' }}</p>

                {# Planning hebdomadaire #}
                <div class="planning-recap">
                    <h3>Planning hebdomadaire</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Jour</th>
                                <th>Arrivée</th>
                                <th>Départ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Lundi</td>
                                <td>{{ child.lundiA ? child.lundiA|date('H:i') : '-' }}</td>
                                <td>{{ child.lundiD ? child.lundiD|date('H:i') : '-' }}</td>
                            </tr>
                            <tr>
                                <td>Mardi</td>
                                <td>{{ child.mardiA ? child.mardiA|date('H:i') : '-' }}</td>
                                <td>{{ child.mardiD ? child.mardiD|date('H:i') : '-' }}</td>
                            </tr>
                            <tr>
                                <td>Mercredi</td>
                                <td>{{ child.mercrediA ? child.mercrediA|date('H:i') : '-' }}</td>
                                <td>{{ child.mercrediD ? child.mercrediD|date('H:i') : '-' }}</td>
                            </tr>
                            <tr>
                                <td>Jeudi</td>
                                <td>{{ child.jeudiA ? child.jeudiA|date('H:i') : '-' }}</td>
                                <td>{{ child.jeudiD ? child.jeudiD|date('H:i') : '-' }}</td>
                            </tr>
                            <tr>
                                <td>Vendredi</td>
                                <td>{{ child.vendrediA ? child.vendrediA|date('H:i') : '-' }}</td>
                                <td>{{ child.vendrediD ? child.vendrediD|date('H:i') : '-' }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="{{ path('app_administration') }}" class="btn btn-success">Terminer l'inscription</a>
        </div>
    </div>
{% endblock %}
