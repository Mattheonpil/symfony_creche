{% extends 'base.html.twig' %}

{% block title %}Modifier l'enfant{% endblock %}

{% block body %}
    <div class="form-container">
        <h1>Modifier les informations de l'enfant</h1>
        
        {{ form_start(form, {'attr': {'class': 'edit-form'}}) }}
        <div class="form-section">
            <h2>Informations générales</h2>
            {{ form_row(form.first_name) }}
            {{ form_row(form.name) }}
            {{ form_row(form.birth_date) }}
            {{ form_row(form.genre) }}
            {{ form_row(form.allergy) }}
            {{ form_row(form.medical_specificity) }}
        </div>

        <div class="form-section form-section--planning"
             data-controller="planning-hours">
            <h2>Planning hebdomadaire</h2>
            <div class="planning-hours">
                <div class="day-group">
                    <h3>Lundi</h3>
                    {{ form_row(form.lundi_a, {
                        'attr': {
                            'data-planning-hours-target': 'lundiA',
                            'data-action': 'change->planning-hours#updateAll'
                        }
                    }) }}
                    {{ form_row(form.lundi_d, {
                        'attr': {
                            'data-planning-hours-target': 'lundiD',
                            'data-action': 'change->planning-hours#updateAll'
                        }
                    }) }}
                    <div>
                        <span>Heures ce jour :</span>
                        <span data-planning-hours-target="dayTotal"></span>
                    </div>
                </div>
                <div class="day-group">
                    <h3>Mardi</h3>
                    {{ form_row(form.mardi_a, {
                        'attr': {
                            'data-planning-hours-target': 'mardiA',
                            'data-action': 'change->planning-hours#updateAll'
                        }
                    }) }}
                    {{ form_row(form.mardi_d, {
                        'attr': {
                            'data-planning-hours-target': 'mardiD',
                            'data-action': 'change->planning-hours#updateAll'
                        }
                    }) }}
                    <div>
                        <span>Heures ce jour :</span>
                        <span data-planning-hours-target="dayTotal"></span>
                    </div>
                </div>
                <div class="day-group">
                    <h3>Mercredi</h3>
                    {{ form_row(form.mercredi_a, {
                        'attr': {
                            'data-planning-hours-target': 'mercrediA',
                            'data-action': 'change->planning-hours#updateAll'
                        }
                    }) }}
                    {{ form_row(form.mercredi_d, {
                        'attr': {
                            'data-planning-hours-target': 'mercrediD',
                            'data-action': 'change->planning-hours#updateAll'
                        }
                    }) }}
                    <div>
                        <span>Heures ce jour :</span>
                        <span data-planning-hours-target="dayTotal"></span>
                    </div>
                </div>
                <div class="day-group">
                    <h3>Jeudi</h3>
                    {{ form_row(form.jeudi_a, {
                        'attr': {
                            'data-planning-hours-target': 'jeudiA',
                            'data-action': 'change->planning-hours#updateAll'
                        }
                    }) }}
                    {{ form_row(form.jeudi_d, {
                        'attr': {
                            'data-planning-hours-target': 'jeudiD',
                            'data-action': 'change->planning-hours#updateAll'
                        }
                    }) }}
                    <div>
                        <span>Heures ce jour :</span>
                        <span data-planning-hours-target="dayTotal"></span>
                    </div>
                </div>
                <div class="day-group">
                    <h3>Vendredi</h3>
                    {{ form_row(form.vendredi_a, {
                        'attr': {
                            'data-planning-hours-target': 'vendrediA',
                            'data-action': 'change->planning-hours#updateAll'
                        }
                    }) }}
                    {{ form_row(form.vendredi_d, {
                        'attr': {
                            'data-planning-hours-target': 'vendrediD',
                            'data-action': 'change->planning-hours#updateAll'
                        }
                    }) }}
                    <div>
                        <span>Heures ce jour :</span>
                        <span data-planning-hours-target="dayTotal"></span>
                    </div>
                </div>
            </div>
            <div class="week-total">
                <strong>Total semaine :</strong>
                <span data-planning-hours-target="weekTotal"></span>
            </div>
        </div>

        <div class="button-group">
            <button type="submit" class="btn btn-primary">Enregistrer</button>
            <a href="{{ path('app_inscription_show', {'childId': child.id}) }}" class="btn btn-secondary">Annuler</a>
        </div>
        {{ form_end(form) }}
    </div>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        .planning-hours {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .day-group {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
        }
        
        .week-total {
            margin-top: 1rem;
            padding: 1rem;
            background: #e9ecef;
            border-radius: 4px;
            text-align: center;
        }
    </style>
{% endblock %}